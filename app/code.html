<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <title>new_themes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <!-- build:css styles/vendor.css -->
        <!-- bower:css -->
        <!-- endbower -->
        <!-- endbuild -->

        <!-- build:css styles/main.css -->

        <link rel="stylesheet" href="styles/main.css">
        <link rel="stylesheet" type="text/css" href="styles/monokai_sublime_hijs.css">
        <!--<link rel="stylesheet" type="text/css" href="styles/monokai_sublime.css">-->

        <!-- endbuild -->

        <!-- build:js scripts/vendor/modernizr.js -->
        <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="bower_components/modernizr/modernizr.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
        function showPlain(id){
            console.log("$(this).hasClass('show') = "+$(this).hasClass('show') );
            console.log(this);

                $(this).removeClass('show');
                $(this).addClass('hide');

                 $('#'+id).removeClass('hide');
                 $('#'+id).addClass('show');


        }
           function hidePlain(id){
            console.log("$(this).hasClass('show') = "+$(this).hasClass('show') );
            console.log(this);

                $(this).removeClass('hide');
                $(this).addClass('show');

                 $('#'+id).removeClass('show');
                 $('#'+id).addClass('hide');


        }

        function toggleCodeView(id){
            console.log("$(this).hasClass('show') = "+$(this).hasClass('show') );
            console.log(this);

                $(this).removeClass('show');
                $(this).addClass('hide');

                 $('#'+id).removeClass('hide');
                 $('#'+id).addClass('show');


        }
        </script>
        <!-- endbuild -->
    </head>
    <body>
        <div id="dimscreen">
            <div>
        <a href="#close" title="Close" class="close">X</a>
        <pre><div id="dim_content" class="plain_code no-highlight"></div></pre>
        </div>
        </div>
        <!--[if lt IE 10]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="container">

            <div class="detail-content white-box">
            <div class="code-path">path/to/some/file.js</div>
           <pre><code class="js show" id="code_1_syntax" onclick="showPlain.apply(this,['code_1_plain']);"><span class="line-number"> 1.|</span> app.get('/api/user', function (request, response) {
<span class="line-number"> 2.|</span>    return UserModel.find(function (error, users) {
<span class="line-number"> 3.|</span>        if (!error) {
<span class="line-number"> 4.|</span>           return response.send(users);
<span class="line-number"> 5.|</span>        } else {
<span class="line-number"> 6.|</span>            response.statusCode = 500;
<span class="line-number"> 7.|</span>            console.log('Internal error(%d): %s',response.statusCode,error.message);
<span class="line-number"> 8.|</span>            return response.send({ error: 'Server error' });
<span class="line-number"> 9.|</span>        }
<span class="line-number">10.|</span>    });
<span class="line-number">11.|</span>});
<span class="line-number">12.|</span>
<span class="line-number">13.|</span>app.get('/api/user/:id', function (request, response) {
<span class="line-number">14.|</span>    return UserModel.findById(request.params.id, function (error, user) {
<span class="line-number">15.|</span>        if(!user) {
<span class="line-number">16.|</span>            response.statusCode = 404;
<span class="line-number">17.|</span>            return response.send({ error: 'Not found' });
<span class="line-number">18.|</span>        }
<span class="line-number">19.|</span>        if (!error) {
<span class="line-number">20.|</span>            return response.send({ status: 'OK', user:user });
<span class="line-number">21.|</span>        } else {
<span class="line-number">22.|</span>            response.statusCode = 500;
<span class="line-number">23.|</span>            console.log('Internal error(%d): %s',response.statusCode,error.message);
<span class="line-number">24.|</span>            return response.send({ error: 'Server error' });
<span class="line-number">25.|</span>        }
<span class="line-number">26.|</span>    });
<span class="line-number">27.|</span>});
<span class="line-number">28.|</span>app.put('/api/user/:id', function (request, response){
<span class="line-number">29.|</span>    return UserModel.findById(request.params.id, function (error, user) {
<span class="line-number">30.|</span>        if(!user) {
<span class="line-number">31.|</span>            response.statusCode = 404;
<span class="line-number">32.|</span>            return response.send({ error: 'Not found' });
<span class="line-number">33.|</span>        }
<span class="line-number">34.|</span>
<span class="line-number">35.|</span>        user.firstname = request.body.firstname;
<span class="line-number">36.|</span>        user.surname = request.body.surname;
<span class="line-number">37.|</span>        user.username = request.body.username;
<span class="line-number">38.|</span>        user.password = request.body.password;
<span class="line-number">39.|</span>        return user.save(function (error) {
<span class="line-number">40.|</span>            if (!error) {
<span class="line-number">41.|</span>                console.log("user updated");
<span class="line-number">42.|</span>                return response.send({ status: 'OK', user:user });
<span class="line-number">43.|</span>            } else {
<span class="line-number">44.|</span>                if(error.name == 'ValidationError') {
<span class="line-number">45.|</span>                    response.statusCode = 400;
<span class="line-number">46.|</span>                    response.send({ error: 'Validation error' });
<span class="line-number">47.|</span>                } else {
<span class="line-number">48.|</span>                    response.statusCode = 500;
<span class="line-number">49.|</span>                    response.send({ error: 'Server error' });
<span class="line-number">50.|</span>                }
<span class="line-number">51.|</span>                console.log('Internal error(%d): %s',response.statusCode,error.message);
<span class="line-number">52.|</span>            }
<span class="line-number">53.|</span>        });
<span class="line-number">54.|</span>    });
<span class="line-number">55.|</span>});
<span class="line-number">55.|</span>
<span class="line-number">55.|</span>app.delete('/api/user/:id', function (request, response){
<span class="line-number">55.|</span>    return UserModel.findById(request.params.id, function (error, user) {
<span class="line-number">55.|</span>        if(!user) {
            response.statusCode = 404;
            return response.send({ error: 'Not found' });
        }
        return user.remove(function (err) {
            if (!error) {
                console.log("User removed");
                return response.send({ status: 'OK' });
            } else {
                response.statusCode = 500;
                console.log('Internal error(%d): %s',response.statusCode,error.message);
                return response.send({ error: 'Server error' });
            }
        });
    });
});
            </code>
            <code class="no-highlight plain_code hide" id="code_1_plain" onclick="showPlain.apply(this,['code_1_syntax']);">app.get('/api/user', function (request, response) {
    return UserModel.find(function (error, users) {
        if (!error) {
            return response.send(users);
        } else {
            response.statusCode = 500;
            console.log('Internal error(%d): %s',response.statusCode,error.message);
            return response.send({ error: 'Server error' });
        }
    });
});

app.get('/api/user/:id', function (request, response) {
    return UserModel.findById(request.params.id, function (error, user) {
        if(!user) {
            response.statusCode = 404;
            return response.send({ error: 'Not found' });
        }
        if (!error) {
            return response.send({ status: 'OK', user:user });
        } else {
            response.statusCode = 500;
            console.log('Internal error(%d): %s',response.statusCode,error.message);
            return response.send({ error: 'Server error' });
        }
    });
});
app.put('/api/user/:id', function (request, response){
    return UserModel.findById(request.params.id, function (error, user) {
        if(!user) {
            response.statusCode = 404;
            return response.send({ error: 'Not found' });
        }

        user.firstname = request.body.firstname;
        user.surname = request.body.surname;
        user.username = request.body.username;
        user.password = request.body.password;
        return user.save(function (error) {
            if (!error) {
                console.log("user updated");
                return response.send({ status: 'OK', user:user });
            } else {
                if(error.name == 'ValidationError') {
                    response.statusCode = 400;
                    response.send({ error: 'Validation error' });
                } else {
                    response.statusCode = 500;
                    response.send({ error: 'Server error' });
                }
                console.log('Internal error(%d): %s',response.statusCode,error.message);
            }
        });
    });
});

app.delete('/api/user/:id', function (request, response){
    return UserModel.findById(request.params.id, function (error, user) {
        if(!user) {
            response.statusCode = 404;
            return response.send({ error: 'Not found' });
        }
        return user.remove(function (err) {
            if (!error) {
                console.log("User removed");
                return response.send({ status: 'OK' });
            } else {
                response.statusCode = 500;
                console.log('Internal error(%d): %s',response.statusCode,error.message);
                return response.send({ error: 'Server error' });
            }
        });
    });
});
            </code></pre>






            </div>


        </div>


        <!-- build:js scripts/vendor.js -->
        <!-- bower:js -->
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <!-- endbower -->
        <!-- endbuild -->

        <!-- build:js scripts/plugins.js -->
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/affix.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/alert.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/dropdown.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/tooltip.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/modal.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/transition.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/button.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/popover.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/carousel.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/scrollspy.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/collapse.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/tab.js"></script>
        <!-- endbuild -->

        <!-- build:js scripts/main.js -->
        <script src="scripts/main.js"></script>
        <!-- endbuild -->

</body>
</html>
